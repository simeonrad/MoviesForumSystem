<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${post.title}">Post Title</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        .post-view, .comments-section {
            background-color: #fff;
            margin: 20px auto;
            width: 80%;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            box-sizing: border-box;
        }
        .post-view h1, .comments-section h2 {
            color: #333;
            text-align: center;
        }
        .post-view p, .comments-section p {
            color: #666;
            line-height: 1.6;
            text-align: left;
            margin: 10px 0;
        }
        .post-view span, .comments-section span {
            font-weight: bold;
        }
        .comment {
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        .comment:first-child {
            border-top: none;
            padding-top: 0;
        }
        .reply {
            margin-left: 20px;
            border-left: 2px solid #ddd;
            padding-left: 10px;
        }
    </style>
</head>
<body>

<div class="post-view">
    <h1 th:text="${post.title}">Post Title</h1>
    <p th:text="${post.content}">Post content goes here...</p>
    <p>Posted by <span th:text="${post.author.username}">Author Username</span> on <span th:text="${#temporals.format(post.timeStamp, 'yyyy-MM-dd HH:mm')}">Timestamp</span></p>
    <p><strong>Views:</strong> <span th:text="${viewCount}">0</span></p>
</div>
<div class="comments-section">
    <h2>Comments</h2>
    <div class="comment" th:each="comment : ${post_comments}">
        <p><span th:text="${comment.author.username}">Comment Author</span> on <span th:text="${#temporals.format(comment.timeStamp, 'yyyy-MM-dd HH:mm')}">Comment Timestamp</span></p>
        <p th:text="${comment.content}">Comment content goes here...</p>
        <div class="reply" th:if="${comment.replies.size() > 0}">
            <h4>Replies</h4>
            <div th:each="reply : ${comment.replies}">
                <p><span th:text="${reply.author.username}">Reply Author</span> on <span th:text="${#temporals.format(reply.timeStamp, 'yyyy-MM-dd HH:mm')}">Reply Timestamp</span></p>
                <p th:text="${reply.content}">Reply content goes here...</p>
            </div>
        </div>

        <form th:action="@{/posts/{postId}/reply(postId=${post.id})}" method="post">
            <input type="hidden" name="postId" th:value="${post.id}" />
            <input type="hidden" name="commentId" th:value="${comment.getId()}" />
            <textarea name="content" placeholder="Write a reply..."></textarea>
            <button type="submit">Reply</button>
        </form>
    </div>
    <form th:action="@{__${requestURI}__}" th:object="${commentDto}" method="post">
        <textarea th:field="*{content}" placeholder="Comment your thoughts..." rows="4" style="width: 100%;"></textarea>
        <button type="submit">Submit Comment</button>
    </form>

</div>

</body>
</html>
